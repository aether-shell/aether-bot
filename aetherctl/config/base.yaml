# Aether Shell Base Config (Phase 1a)
schema_version: "1.0.0"
phase: "1a"
artifacts_dir: "artifacts"

state_machine:
  steps:
    - freeze
    - integrate
    - twin_up
    - data_mirror
    - regress
    - resilience
    - judge
    - promote
    - canary
    - done
  skip_rules:
    "1a":
      - twin_up
      - data_mirror
      - resilience
      - canary
  timeouts:
    freeze: 60
    integrate: 300
    regress: 1800
    judge: 120
    promote: 300
  max_concurrent: 1

thresholds:
  feature:
    functionality_min_pct: 2
    stability_max_pct: 0
    p95_latency_max_pct: 5
  bugfix:
    functionality_min_pct: 0
    stability_max_pct: 0
    p95_latency_max_pct: 5
  refactor:
    functionality_min_pct: 0
    stability_max_pct: 0
    p95_latency_max_pct: 5
  dependency:
    functionality_min_pct: 0
    stability_max_pct: 0
    p95_latency_max_pct: 10
  upstream:
    functionality_min_pct: -1
    stability_max_pct: 0.5
    p95_latency_max_pct: 10

risk_policy:
  path_rules:
    - pattern: "migrations/*"
      level: high
    - pattern: "docs/*"
      level: low
    - pattern: "*.md"
      level: low
    - pattern: "src/auth/*"
      level: high
    - pattern: "src/security/*"
      level: high
    - pattern: ".github/*"
      level: low
  auto_escalation:
    - "migrations/*"
    - "src/auth/*"
    - "src/security/*"
    - "src/judge/*"
    - "src/promoter/*"
